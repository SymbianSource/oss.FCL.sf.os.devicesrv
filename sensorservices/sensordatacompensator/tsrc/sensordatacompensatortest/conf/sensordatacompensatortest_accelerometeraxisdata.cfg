[Define]

KAccelerometerXYZAxisData 270553214 // Use data type [x, y, z]

ECompensationDeviceOrientation 0
ECompensationUIOrientation 1
ECompensationDeviceAndUIOrientation 2

// Publish&Subscribe definitions
ETestInputDataItem 1
ETestOutputDataItem 2
ETestPluginDataItem 3
ETestInputDataItemCrap 4
ETestPluginDataItemCrap 5

ETestPluginAction 0
ETestPluginActionResetData 1
ETestPluginActionFailCreation 2

ETestPluginReturnErrorOnDataUpdate 1
ETestInputDataExpectedError 2
ETestOutputDataThreshold 3

KErrNotSupported -5
KErrArgument -6
KErrNotReady -18
KErrCorrupt -20

[Enddefine]

[StifSettings]
CheckHeapBalance= on
[EndStifSettings]

// ---------------------------------------------------------------------------
// Test cases for constructor / destructor
// ---------------------------------------------------------------------------

[Test]
title Create and destroy compensator
create sensordatacompensatortest testClass
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
pause 1000
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: rotations about x-axis
// ---------------------------------------------------------------------------

[Test]
title 5 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [5,0,0]
testClass AppenDataItem ETestPluginDataItem 5 0 0
print Output data: [50,82,208]
testClass AppenDataItem ETestOutputDataItem 50 82 208
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 10 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [10,0,0]
testClass AppenDataItem ETestPluginDataItem 10 0 0
print Output data: [50,64,214]
testClass AppenDataItem ETestOutputDataItem 50 64 214
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 15 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [15,0,0]
testClass AppenDataItem ETestPluginDataItem 15 0 0
print Output data: [50,45,219]
testClass AppenDataItem ETestOutputDataItem 50 45 219
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 30 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [30,0,0]
testClass AppenDataItem ETestPluginDataItem 30 0 0
print Output data: [50,-13,223]
testClass AppenDataItem ETestOutputDataItem 50 -13 223
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 45 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [45,0,0]
testClass AppenDataItem ETestPluginDataItem 45 0 0
print Output data: [50,-71,212]
testClass AppenDataItem ETestOutputDataItem 50 -71 212
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 60 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [60,0,0]
testClass AppenDataItem ETestPluginDataItem 60 0 0
print Output data: [50,-123,187]
testClass AppenDataItem ETestOutputDataItem 50 -123 187
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [90,0,0]
testClass AppenDataItem ETestPluginDataItem 90 0 0
print Output data: [50,-200,100]
testClass AppenDataItem ETestOutputDataItem 50 -200 100
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 120 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [120,0,0]
testClass AppenDataItem ETestPluginDataItem 120 0 0
print Output data: [50,-223,-13]
testClass AppenDataItem ETestOutputDataItem 50 -223 -13
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 150 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [150,0,0]
testClass AppenDataItem ETestPluginDataItem 150 0 0
print Output data: [50,-187,-123]
testClass AppenDataItem ETestOutputDataItem 50 -187 -123
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [180,0,0]
testClass AppenDataItem ETestPluginDataItem 180 0 0
print Output data: [50,-100,-200]
testClass AppenDataItem ETestOutputDataItem 50 -100 -200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 210 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [210,0,0]
testClass AppenDataItem ETestPluginDataItem 210 0 0
print Output data: [210,13,-223]
testClass AppenDataItem ETestOutputDataItem 50 13 -223
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 240 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [240,0,0]
testClass AppenDataItem ETestPluginDataItem 240 0 0
print Output data: [50,123,-187]
testClass AppenDataItem ETestOutputDataItem 50 123 -187
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 270 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [270,0,0]
testClass AppenDataItem ETestPluginDataItem 270 0 0
print Output data: [50,200,-100]
testClass AppenDataItem ETestOutputDataItem 50 200 -100
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 300 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [300,0,0]
testClass AppenDataItem ETestPluginDataItem 300 0 0
print Output data: [50,223,13]
testClass AppenDataItem ETestOutputDataItem 50 223 13
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 330 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [330,0,0]
testClass AppenDataItem ETestPluginDataItem 330 0 0
print Output data: [50,187,123]
testClass AppenDataItem ETestOutputDataItem 50 187 123
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: rotations about y-axis
// ---------------------------------------------------------------------------

[Test]
title 30 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,30,0]
testClass AppenDataItem ETestPluginDataItem 0 30 0
print Output data: [143,100,148]
testClass AppenDataItem ETestOutputDataItem 143 100 148
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 45 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,45,0]
testClass AppenDataItem ETestPluginDataItem 0 45 0
print Output data: [177,100,106]
testClass AppenDataItem ETestOutputDataItem 177 100 106
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 60 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,60,0]
testClass AppenDataItem ETestPluginDataItem 0 60 0
print Output data: [198,100,57]
testClass AppenDataItem ETestOutputDataItem 198 100 57
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,90,0]
testClass AppenDataItem ETestPluginDataItem 0 90 0
print Output data: [200,100,-50]
testClass AppenDataItem ETestOutputDataItem 200 100 -50
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,180,0]
testClass AppenDataItem ETestPluginDataItem 0 180 0
print Output data: [-50,100,-200]
testClass AppenDataItem ETestOutputDataItem -50 100 -200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 270 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,270,0]
testClass AppenDataItem ETestPluginDataItem 0 270 0
print Output data: [-200,100,50]
testClass AppenDataItem ETestOutputDataItem -200 100 50
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: rotations about z-axis
// ---------------------------------------------------------------------------

[Test]
title 30 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,30]
testClass AppenDataItem ETestPluginDataItem 0 0 30
print Output data: [-7,112,200]
testClass AppenDataItem ETestOutputDataItem -7 112 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 45 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,45]
testClass AppenDataItem ETestPluginDataItem 0 0 45
print Output data: [-35,106,200]
testClass AppenDataItem ETestOutputDataItem -35 106 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 60 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,60]
testClass AppenDataItem ETestPluginDataItem 0 0 60
print Output data: [-62,93,200]
testClass AppenDataItem ETestOutputDataItem -62 93 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,90]
testClass AppenDataItem ETestPluginDataItem 0 0 90
print Output data: [-100,50,200]
testClass AppenDataItem ETestOutputDataItem -100 50 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,180]
testClass AppenDataItem ETestPluginDataItem 0 0 180
print Output data: [-50,-100,200]
testClass AppenDataItem ETestOutputDataItem -50 -100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 270 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,270]
testClass AppenDataItem ETestPluginDataItem 0 0 270
print Output data: [100,-50,200]
testClass AppenDataItem ETestOutputDataItem 100 -50 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: combined rotations about multiple axes
// ---------------------------------------------------------------------------

[Test]
title 90 deg about x-axis, 90 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [90,90,0]
testClass AppenDataItem ETestPluginDataItem 90 90 0
print Output data: [200,50,100]
testClass AppenDataItem ETestOutputDataItem 200 50 100
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about x-axis, 90 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [90,0,90]
testClass AppenDataItem ETestPluginDataItem 90 0 90
print Output data: [-100,-200,50]
testClass AppenDataItem ETestOutputDataItem -100 -200 50
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about y-axis, 90 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,90,90]
testClass AppenDataItem ETestPluginDataItem 0 90 90
print Output data: [200,50,100]
testClass AppenDataItem ETestOutputDataItem 200 50 100
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 90 deg about x-, y- and z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [90,90,90]
testClass AppenDataItem ETestPluginDataItem 90 90 90
print Output data: [200,-100,50]
testClass AppenDataItem ETestOutputDataItem 200 -100 50
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about x-axis, 180 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [180,180,0]
testClass AppenDataItem ETestPluginDataItem 180 180 0
print Output data: [-50,-100,200]
testClass AppenDataItem ETestOutputDataItem -50 -100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about x-axis, 180 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [180,0,180]
testClass AppenDataItem ETestPluginDataItem 180 0 180
print Output data: [-50,100,-200]
testClass AppenDataItem ETestOutputDataItem -50 100 -200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about y-axis, 180 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,180,180]
testClass AppenDataItem ETestPluginDataItem 0 180 180
print Output data: [50,-100,-200]
testClass AppenDataItem ETestOutputDataItem 50 -100 -200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 180 deg about x-, y- and z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [180,180,180]
testClass AppenDataItem ETestPluginDataItem 180 180 180
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 30 deg about x-axis, 60 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [30,60,0]
testClass AppenDataItem ETestPluginDataItem 30 60 0
print Output data: [198,58,99]
testClass AppenDataItem ETestOutputDataItem 198 58 99
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 15 deg about x-axis, 120 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [15,0,120]
testClass AppenDataItem ETestPluginDataItem 15 0 120
print Output data: [-112,-58,191]
testClass AppenDataItem ETestOutputDataItem -112 -58 191
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 45 deg about y-axis, 135 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,45,135]
testClass AppenDataItem ETestPluginDataItem 0 45 135
print Output data: [66,-35,216]
testClass AppenDataItem ETestOutputDataItem 66 -35 216
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 30 deg about x-axis, 60 deg about y-axis and 90 deg about z-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [30,60,90]
testClass AppenDataItem ETestPluginDataItem 30 60 90
print Output data: [123,-50,187]
testClass AppenDataItem ETestOutputDataItem 123 -50 187
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: already compensated
// ---------------------------------------------------------------------------

// ...

// ---------------------------------------------------------------------------
// Test cases for AccelerometerAxisData: special cases
// ---------------------------------------------------------------------------

[Test]
title 0 deg about any axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [0,0,0]
testClass AppenDataItem ETestPluginDataItem 0 0 0
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 360 deg about x-axis (same as 0 deg) (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [360,0,0]
testClass AppenDataItem ETestPluginDataItem 360 0 0
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title -90 deg about x-axis (same as 270 deg) (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [-90,0,0]
testClass AppenDataItem ETestPluginDataItem -90 0 0
print Output data: [50,200,-100]
testClass AppenDataItem ETestOutputDataItem 50 200 -100
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title -180 deg about x-axis (same as 180 deg) (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [-180,0,0]
testClass AppenDataItem ETestPluginDataItem -180 0 0
print Output data: [50,-100,-200]
testClass AppenDataItem ETestOutputDataItem 50 -100 -200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Negative input values (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [-50,100,-200]
testClass AppenDataItem ETestInputDataItem -50 100 -200
print Plugin data: [30,0,0]
testClass AppenDataItem ETestPluginDataItem 30 0 0
print Output data: [-50,187,-123]
testClass AppenDataItem ETestOutputDataItem -50 187 -123
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Very big input values (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [21474836,21474836,21474836]
testClass AppenDataItem ETestInputDataItem 21474836 21474836 21474836  
print Plugin data: [30,0,0]
testClass AppenDataItem ETestPluginDataItem 30 0 0
print Output data: [21474836,7860335,29335172]
testClass AppenDataItem ETestOutputDataItem 21474836 7860335 29335172
print Output threshold: [2000]
testClass SetState ETestOutputDataThreshold 2000
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Max signed 32bit input value (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [2147483647,0,0]
testClass AppenDataItem ETestInputDataItem 2147483647 0 0  
print Plugin data: [0,-90,0]
testClass AppenDataItem ETestPluginDataItem 0 -90 0
print Output data: [0,2147483647,0]
testClass AppenDataItem ETestOutputDataItem 0 0 2147483647
print Output threshold: [100000]
testClass SetState ETestOutputDataThreshold 100000
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Two input items 1) 90 deg about z-axis 2) 30 deg about y-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceAndUIOrientation
print Input data: [0,0,60]
testClass AppenDataItem ETestInputDataItem 0 0 60
print Plugin data 1: [0,0,90]
testClass AppenDataItem ETestPluginDataItem 0 0 90
pause 500
print Plugin data 2: [0,30,0]
testClass AppenDataItem ETestPluginDataItem 0 30 0
print Output data: [0,30,52]
testClass AppenDataItem ETestOutputDataItem 0 30 52
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

// ---------------------------------------------------------------------------
// Test cases for compensation errors and performance
// ---------------------------------------------------------------------------

[Test]
title Fail to create plugin (accelerometer axis data compensation)
create sensordatacompensatortest testClass
testClass SetState ETestPluginAction ETestPluginActionFailCreation
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass SetState ETestInputDataExpectedError KErrNotSupported
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print When plugin is not loaded, compensator should return same values to client
testClass AppenDataItem ETestPluginDataItem 30 60 90
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Create unknown compensation handler (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for unknown DeviceOrientation compensation
testClass CreateCompensator 0 ECompensationDeviceOrientation
testClass SetState ETestInputDataExpectedError KErrNotSupported
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Plugin data update returns KErrNotReady (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass SetState ETestPluginReturnErrorOnDataUpdate KErrNotReady
testClass SetState ETestInputDataExpectedError KErrNotReady
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print When plugin is not ready, compensator should return same values to client
testClass AppenDataItem ETestPluginDataItem 30 60 90
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Plugin data update returns crap compensation value (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationUIOrientation
print Plugin returns crap compensation value
testClass AppenDataItem ETestPluginDataItemCrap 1
testClass SetState ETestInputDataExpectedError KErrCorrupt
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Plugin data update returns two crap compensation values (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationUIOrientation
print Plugin returns crap compensation value
testClass AppenDataItem ETestPluginDataItemCrap 0
pause 500
testClass AppenDataItem ETestPluginDataItemCrap 1
testClass SetState ETestInputDataExpectedError KErrCorrupt
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title Client passes crap for compensation (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationUIOrientation
print Client passes crap
testClass AppenDataItem ETestInputDataItemCrap 0
testClass SetState ETestInputDataExpectedError KErrArgument
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass AppenDataItem ETestInputDataItemCrap 1
testClass SetState ETestInputDataExpectedError KErrArgument
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Output data: [50,100,200]
testClass AppenDataItem ETestOutputDataItem 50 100 200
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 5 deg about x-axis updates to 10 deg (accelerometer axis data compensation)
create sensordatacompensatortest testClass
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [5,0,0]
testClass AppenDataItem ETestPluginDataItem 5 0 0
print Output data: [50,82,208]
testClass AppenDataItem ETestOutputDataItem 50 82 208
pause 500
print Plugin data reset
testClass CompensateAndVerifyDataItems
testClass SetState ETestPluginAction ETestPluginActionResetData
pause 500
print Plugin data: [10,0,0]
testClass AppenDataItem ETestPluginDataItem 10 0 0
testClass AppenDataItem ETestOutputDataItem 50 64 214
pause 500
testClass CompensateAndVerifyDataItems
testClass DestroyCompensator
delete testClass
[Endtest]

[Test]
title 10 clients: 5 deg about x-axis (accelerometer axis data compensation)
create sensordatacompensatortest testClass
create sensordatacompensatortest testClass1
create sensordatacompensatortest testClass2
create sensordatacompensatortest testClass3
create sensordatacompensatortest testClass4
create sensordatacompensatortest testClass5
create sensordatacompensatortest testClass6
create sensordatacompensatortest testClass7
create sensordatacompensatortest testClass8
create sensordatacompensatortest testClass9
print Create compensator for AccelerometerXYZAxisData DeviceOrientation compensation
testClass CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass1 CreateCompensator KAccelerometerXYZAxisData ECompensationUIOrientation
testClass2 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceAndUIOrientation
testClass3 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass4 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass5 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass6 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass7 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass8 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
testClass9 CreateCompensator KAccelerometerXYZAxisData ECompensationDeviceOrientation
print Input data: [50,100,200]
testClass AppenDataItem ETestInputDataItem 50 100 200
testClass1 AppenDataItem ETestInputDataItem 50 100 200
testClass2 AppenDataItem ETestInputDataItem 50 100 200
testClass3 AppenDataItem ETestInputDataItem 50 100 200
testClass4 AppenDataItem ETestInputDataItem 50 100 200
testClass5 AppenDataItem ETestInputDataItem 50 100 200
testClass6 AppenDataItem ETestInputDataItem 50 100 200
testClass7 AppenDataItem ETestInputDataItem 50 100 200
testClass8 AppenDataItem ETestInputDataItem 50 100 200
testClass9 AppenDataItem ETestInputDataItem 50 100 200
print Plugin data: [5,0,0]
testClass AppenDataItem ETestPluginDataItem 5 0 0
print Output data: [50,82,208]
testClass AppenDataItem ETestOutputDataItem 50 82 208
testClass1 AppenDataItem ETestOutputDataItem 50 82 208
testClass2 AppenDataItem ETestOutputDataItem 50 82 208
testClass3 AppenDataItem ETestOutputDataItem 50 82 208
testClass4 AppenDataItem ETestOutputDataItem 50 82 208
testClass5 AppenDataItem ETestOutputDataItem 50 82 208
testClass6 AppenDataItem ETestOutputDataItem 50 82 208
testClass7 AppenDataItem ETestOutputDataItem 50 82 208
testClass8 AppenDataItem ETestOutputDataItem 50 82 208
testClass9 AppenDataItem ETestOutputDataItem 50 82 208
pause 500
print Compensate data
testClass CompensateAndVerifyDataItems 1000
testClass1 CompensateAndVerifyDataItems 1000
testClass2 CompensateAndVerifyDataItems 1000
testClass3 CompensateAndVerifyDataItems 1000
testClass4 CompensateAndVerifyDataItems 1000
testClass5 CompensateAndVerifyDataItems 1000
testClass6 CompensateAndVerifyDataItems 1000
testClass7 CompensateAndVerifyDataItems 1000
testClass8 CompensateAndVerifyDataItems 1000
testClass9 CompensateAndVerifyDataItems 1000
print Destroy compensator
testClass DestroyCompensator
testClass1 DestroyCompensator
testClass2 DestroyCompensator
testClass3 DestroyCompensator
testClass4 DestroyCompensator
testClass5 DestroyCompensator
testClass6 DestroyCompensator
testClass7 DestroyCompensator
testClass8 DestroyCompensator
testClass9 DestroyCompensator
delete testClass
delete testClass1
delete testClass2
delete testClass3
delete testClass4
delete testClass5
delete testClass6
delete testClass7
delete testClass8
delete testClass9
[Endtest]
